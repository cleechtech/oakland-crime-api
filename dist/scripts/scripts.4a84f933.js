"use strict";angular.module("oakCrimeApp",["ngAnimate","ngMorris"]),angular.module("oakCrimeApp").controller("MainCtrl",["$scope","$http",function(a,b){b.get("http://data.oaklandnet.com/resource/ym6k-rx7a.json").then(function(a){var b=a.data,c={},d=[];_.map(b,function(a){var b=Date.parse(a.datetime);c[b]?c[b].push({policebeat:a.policebeat,crimetype:a.crimetype,description:a.description}):c[b]=[{policebeat:a.policebeat,crimetype:a.crimetype,description:a.description}]});var e=_.keys(c).sort();return _.map(e,function(a){d.push({date:a,totalCrimes:c[a].length})}),d}).then(function(b){a.crimes=b},function(b){a.crimes=b})}]),angular.module("ngMorris",[]).directive("barChart",function(){return{restrict:"A",scope:{x:"@barX",y:"@barY",barData:"="},link:function(a,b){a.$watch("barData",function(){a.barData&&new Morris.Bar({element:b,data:a.barData,xkey:a.x,ykeys:JSON.parse(a.y),labels:["Number of violations"],xLabelMargin:2})})}}}).directive("donutChart",function(){return{restrict:"A",scope:{donutData:"="},link:function(a,b){a.$watch("donutData",function(){a.donutData&&new Morris.Donut({element:b,data:a.donutData})})}}}).directive("lineChart",function(){return{restrict:"A",scope:{lineData:"=",lineXkey:"@",lineYkeys:"@",lineLabels:"@"},link:function(a,b){a.$watch("lineData",function(){a.lineData&&new Morris.Line({element:b,data:a.lineData,xkey:a.lineXkey,ykeys:JSON.parse(a.lineYkeys),labels:JSON.parse(a.lineLabels)})})}}});